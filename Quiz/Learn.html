<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NIFA Aircraft Rec</title>
    <link rel="stylesheet" href="../cleancss.css">
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../CSS/learn.css">
</head>
<body>
    <main>
        <!-- #Replace with DB-inserted aircraft -->
        <img src="../img/Aircraft/" alt="">
        <h2>Information about the aircraft:</h2>
        <ul>
            <li><p></p></li>
            <li><p></p></li>
            <li><p></p></li>
        </ul>
        <div class="dual">
            <!-- #Insert new aircraft, sequentially -->
            <div class="left"><p>Previous</p></div>
            <div class="right"><p>Next</p></div>
        </div>
    </main>
    <script src="../script.js"></script>
    <script>
        let currentAircraftId = 1; // Starting with the first aircraft

        async function fetchAircraft(id) {
            try {
                const response = await fetch(`/api/aircraft/${id}`);
                if (!response.ok) {
                    throw new Error('Aircraft not found');
                }
                const aircraft = await response.json();
                updatePageWithAircraft(aircraft);
            } catch (error) {
                console.error('Failed to fetch aircraft:', error);
            }
        }

        function updatePageWithAircraft(aircraft) {
            document.querySelector('img').src = `../img/Aircraft/${aircraft["img src"]}`;
            document.querySelector('img').alt = `Image of ${aircraft.manufacturer} ${aircraft.model}`;
            const ul = document.querySelector('main ul');
            ul.innerHTML = `
                <li>Manufacturer: ${aircraft.manufacturer}</li>
                <li>Model: ${aircraft.model}</li>
                <li>Common Name: ${aircraft.altname}</li>
            `;
        }

        document.querySelector('.left').addEventListener('click', () => {
            if (currentAircraftId > 1) {
                currentAircraftId -= 1;
                fetchAircraft(currentAircraftId);
            }
        });

        document.querySelector('.right').addEventListener('click', () => {
            // Assuming you know the maximum ID or have a way to check if the next ID exists
            currentAircraftId += 1;
            fetchAircraft(currentAircraftId);
        });

        // Initial fetch
        fetchAircraft(currentAircraftId);
    </script>
</body>
</html>