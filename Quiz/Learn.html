<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NIFA Aircraft Rec</title>
    <link rel="stylesheet" href="../cleancss.css">
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../CSS/learn.css">
</head>
<body>
    <main>
        <!-- #Replace with DB-inserted aircraft -->
        <img src="../img/Aircraft/" alt="Failed to generate aircraft. Please contact @likeusb on discord or email me at linas@likeusb.me">
        <h2 id="Manufacturer"></h2>
        <div class="dual">
            <!-- #Insert new aircraft, sequentially -->
            <div class="left" id="prev"><p>Previous</p></div>
            <div class="right" id="next"><p>Next</p></div>
        </div>
        <a href="/menu" class="leave">
            <p>Go back</p>
        </a>
    </main>
    <script src="../script.js"></script>
    <script>
        async function fetchAndDisplayQuestion() {
            try {
                const response = await fetch('http://127.0.0.1:1337/sequential-question');
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                if (!response.headers.get('content-type')?.includes('application/json')) {
                    throw new Error('Received non-JSON response from server');
                }
                const questionData = await response.json();
                const aircraftImage = document.querySelector('img');
                aircraftImage.src = `../img/Aircraft/${questionData.correctAircraft.id-1}.png`;
                aircraftImage.alt = `Image ${questionData.correctAircraft.model}`;
                document.getElementById('Manufacturer').innerHTML = `${questionData.correctAircraft.manufacturer} ${questionData.correctAircraft.model} ${questionData.correctAircraft.altname}`;
            } catch (error) {
                console.error('Error fetching question data:', error);
            }
        }

        fetchAndDisplayQuestion();
    </script>
</body>
</html>